<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŸãã¡ã‚ƒã‚“ã®èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ªï¼šã¦ã‚“ã‹ã‚“é‡ç©ã®æ£®ã‚’è¶Šãˆã‚ï¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif; /* å¯æ„›ã‚‰ã—ã„ãƒ•ã‚©ãƒ³ãƒˆ */
            background-color: #fce7f3; /* æ¡œè‰²ã®ã‚ˆã†ãªå„ªã—ã„èƒŒæ™¯ */
            color: #333;
            line-height: 1.6;
        }
        .game-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 25px; /* ã‚ˆã‚Šä¸¸ã¿ã‚’å¸¯ã³ãŸè§’ */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); /* å¼·ã‚ã®å½± */
        }
        .question-area {
            min-height: 150px;
            background-color: #e0f2fe; /* è–„ã„é’ */
            border: 3px dashed #ef4444; /* èµ¤ã„ç‚¹ç·šãƒœãƒ¼ãƒ€ãƒ¼ */
            border-radius: 20px;
            padding: 25px;
        }
         .answer-choices button {
            background-color: #a7f3d0; /* è–„ã„ç·‘ã®ãƒœã‚¿ãƒ³ */
            color: #065f46;
            font-weight: 600;
            padding: 14px 25px; /* ãƒœã‚¿ãƒ³ã‚’å¤§ãã */
            border-radius: 15px; /* ä¸¸ã¿ã‚’å¸¯ã³ãŸãƒœã‚¿ãƒ³ */
            box-shadow: 0 5px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .answer-choices button:hover {
            background-color: #6ee7b7; /* ãƒ›ãƒãƒ¼ã§æ¿ƒã„ç·‘ */
            transform: translateY(-3px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }
        .answer-choices button:active {
            transform: translateY(0);
            box-shadow: 0 5px 8px rgba(0, 0, 0, 0.1);
        }
         .answer-choices button.bg-green-500 {
            background-color: #34d399; /* æ­£è§£æ™‚ã®ç·‘ */
             color: white;
        }
        .answer-choices button.bg-red-500 {
            background-color: #f87171; /* ä¸æ­£è§£æ™‚ã®èµ¤ */
             color: white;
        }

        .feedback-area {
            min-height: 200px;
            background-color: #bfdbfe; /* è–„ã„æ°´è‰² */
            border-left: 8px solid #ef4444; /* å¼·èª¿ã•ã‚ŒãŸèµ¤ã„å·¦ãƒœãƒ¼ãƒ€ãƒ¼ */
            border-radius: 20px;
            padding: 25px;
        }
        .character-dialogue {
            font-style: italic;
            color: #881337; /* èµ¤ç³»ã®æ–‡å­—è‰² */
            margin-top: 20px;
            padding: 15px;
            background-color: #fecaca; /* è–„ã„èµ¤ç³»ã®èƒŒæ™¯ */
            border-radius: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .character-dialogue img {
            width: 100px; /* ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã‚’å¤§ãã */
            height: 100px;
            border-radius: 50%;
            margin-right: 20px;
            border: 4px solid #dc2626; /* èµ¤ã„ãƒœãƒ¼ãƒ€ãƒ¼ */
            object-fit: cover;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 9999px;
            margin-top: 25px;
            height: 25px; /* ãƒãƒ¼ã‚’ã•ã‚‰ã«å¤ªã */
            overflow: hidden;
            box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.1);
        }
        .progress-bar {
            height: 100%;
            background-image: linear-gradient(to right, #ef4444, #fca5a5); /* èµ¤ç³»ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
            border-radius: 9999px;
            transition: width 0.5s ease-in-out;
            text-align: center;
            color: white;
            font-size: 1rem;
            line-height: 25px;
            font-weight: bold;
        }
        .xp-level {
            margin-top: 15px;
            font-size: 1.1rem;
            text-align: right;
            color: #4b5563;
            font-weight: 700;
        }
        #game-intro button,
        #game-end button {
            background-color: #f97316; /* ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã®ãƒœã‚¿ãƒ³ */
            color: white;
            font-weight: bold;
            padding: 15px 30px; /* ãƒœã‚¿ãƒ³ã‚’ã•ã‚‰ã«å¤§ãã */
            border-radius: 15px;
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
             transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
        }
         #game-intro button:hover,
        #game-end button:hover {
             background-color: #ea580c; /* ãƒ›ãƒãƒ¼ã§æ¿ƒã„ã‚ªãƒ¬ãƒ³ã‚¸ */
             transform: translateY(-3px);
             box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }
         #game-intro button:active,
        #game-end button:active {
             transform: translateY(0);
             box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }

        #game-end .bg-yellow-500 { /* å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ */
             background-color: #facc15;
             color: #854d0e;
        }
         #game-end .bg-yellow-500:hover {
             background-color: #eab308;
             color: #713f12;
        }
         #game-end .bg-blue-500 { /* ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ãƒœã‚¿ãƒ³ */
             background-color: #3b82f6;
             color: white;
        }
         #game-end .bg-blue-500:hover {
             background-color: #2563eb;
        }


        #story-intro {
            background-color: #fef3c7; /* è–„ã„é»„è‰² */
            border-left-color: #fbbf24; /* é»„è‰²ã®ãƒœãƒ¼ãƒ€ãƒ¼ */
            border-radius: 15px;
            padding: 20px;
        }

        #incorrect-answers-summary {
            background-color: #fee2e2; /* è–„ã„èµ¤ */
            border-left-color: #ef4444; /* èµ¤ã®ãƒœãƒ¼ãƒ€ãƒ¼ */
            border-radius: 15px;
            padding: 20px;
        }

        h1, h2, h3, h4 {
            color: #881337; /* è¦‹å‡ºã—ã®è‰²ã‚’èµ¤ç³»ã« */
        }
        #game-title-image {
            display: block;
            margin: 0 auto 25px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’å¢—ã‚„ã™ */
            max-width: 95%; /* å°‘ã—å¤§ãã */
            height: auto;
            border-radius: 20px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

    </style>
</head>
<body class="p-4">
    <div class="game-container">
        <h1 class="text-3xl font-bold text-center mb-6">ãŸãã¡ã‚ƒã‚“ã®èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ªï¼šã¦ã‚“ã‹ã‚“é‡ç©ã®æ£®ã‚’è¶Šãˆã‚ï¼</h1>
        <img id="game-title-image" src="uploaded:DALLÂ·E 2025-03-23 01.21.54 - A magical river scene in a forest where a young Japanese boy (Taku) and a red giant salamander swim toward a glowing underwater door. The door is anci.jpg-96d2822e-09a7-47b1-81b5-ad8e2e39363c" alt="ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«ç”»åƒ" onerror="this.onerror=null;this.src='https://placehold.co/600x180/cccccc/333333?text=ã‚¿ã‚¤ãƒˆãƒ«ç”»åƒ';">

        <div id="game-intro">
            <p class="mb-4">ç ”ä¿®åŒ»ã®ãŸãã¡ã‚ƒã‚“ã€å›ã¯æ—¥ã€…ã®å¿™ã—ã•ã«è¿½ã‚ã‚Œã‚‹ä¸­ã§ã€ã‚ã‚‹æ—¥ã€ä¸æ€è­°ãªèµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ªã«å‡ºä¼šã£ãŸã€‚ãã®ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ªã¯ã€å°å…ç§‘ã®å¥¥æ·±ã„çŸ¥è­˜ãŒéš ã•ã‚ŒãŸã€Œã¦ã‚“ã‹ã‚“é‡ç©ã®æ£®ã€ã¸ã®é“ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚ã•ã‚ã€ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ªã®å°ãã«å¾“ã„ã€æ£®ã®å¥¥ã«æ½œã‚€æ§˜ã€…ãªã€ŒåŒ»ç™‚ã®è©¦ç·´ã€ã«ç«‹ã¡å‘ã‹ã„ã€å°å…ã®ã¦ã‚“ã‹ã‚“é‡ç©çŠ¶æ…‹ã«é–¢ã™ã‚‹çœŸã®çŸ¥è­˜ã¨è‡ªä¿¡ã‚’æ‰‹ã«å…¥ã‚Œã‚ˆã†ï¼</p>
            <p class="mb-4 text-center">å†’é™ºã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>
            <button id="start-game-btn" class="block mx-auto">å†’é™ºã‚’é–‹å§‹ã™ã‚‹</button>
        </div>

        <div id="game-area" class="hidden">
            <div id="story-intro" class="mb-6">
                </div>

            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar" style="width: 0%;">0%</div>
            </div>
            <div id="xp-level" class="xp-level">XP: 0 | ãƒ¬ãƒ™ãƒ«: 1 | ç§°å·: è¦‹ç¿’ã„ç ”ä¿®åŒ»</div>

            <div id="question-display" class="mb-6 question-area">
                <h2 id="question-text" class="text-xl font-semibold mb-4"></h2>
                <div id="answer-choices" class="flex flex-col space-y-3">
                    </div>
            </div>

            <div id="feedback-display" class="hidden mb-6 feedback-area">
                <h3 id="feedback-title" class="text-2xl font-semibold mb-3"></h3>
                <p id="feedback-text" class="mb-4"></p>
                <div id="supplementary-learning">
                    <h4 class="font-semibold mt-3 text-lg">è£œè¶³å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:</h4>
                    <ul id="supplementary-list" class="list-disc list-inside ml-4 space-y-1">
                        </ul>
                </div>
                <button id="next-question-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-md mt-4">æ¬¡ã®è©¦ç·´ã¸</button>
            </div>

            <div id="character-dialogue" class="character-dialogue">
                <img id="character-image" src="uploaded:ChatGPT Image 2025å¹´4æœˆ1æ—¥ 20_53_30.jpg-38da21c3-7db7-4593-89ba-de119af3cfba" alt="èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª" class="hidden" onerror="this.onerror=null;this.src='https://placehold.co/100x100/cccccc/333333?text=ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª';">
                <span id="character-text"></span>
            </div>
        </div>

        <div id="game-end" class="hidden text-center">
            <h2 class="text-3xl font-bold mb-4">å†’é™ºçµ‚äº†ï¼</h2>
            <p id="final-score" class="text-lg mb-2"></p>
            <p id="final-xp-level" class="text-lg mb-4"></p>
            <div id="badges-earned" class="mb-6">
                <h3 class="text-2xl font-semibold mb-3">ç²å¾—ã—ãŸãƒãƒƒã‚¸:</h3>
                <ul id="badge-list" class="list-none p-0 space-y-1">
                    </ul>
            </div>
            <div id="incorrect-answers-summary" class="mb-6 text-left">
                <h3 class="text-2xl font-semibold mb-3">å¼±ç‚¹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯:</h3>
                <p id="weakness-feedback" class="mb-3"></p>
                <ul id="incorrect-list" class="list-disc list-inside ml-4 space-y-2">
                    </ul>
            </div>
            <div class="flex justify-center space-x-4">
                 <button id="review-mode-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg shadow-md">å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰</button>
                 <button id="restart-game-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
            </div>
            <div class="mt-6 text-sm text-gray-600">
                 <label for="shuffle-questions" class="mr-2">å•é¡Œé †ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«:</label>
                 <input type="checkbox" id="shuffle-questions" class="mr-4 accent-blue-500">
                 <label for="shuffle-choices" class="mr-2">é¸æŠè‚¢é †ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«:</label>
                 <input type="checkbox" id="shuffle-choices" class="accent-blue-500">
            </div>
        </div>
    </div>

    <script>
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒURLï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒã‚’ä½¿ç”¨ï¼‰
        const characterImages = {
            "èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª": "uploaded:ChatGPT Image 2025å¹´4æœˆ1æ—¥ 20_53_30.jpg-38da21c3-7db7-4593-89ba-de119af3cfba"
        };

        // ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ï¼ˆå•é¡Œã€å›ç­”ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰
        const gameData = [
            {
                chapter: "å§‹ã¾ã‚Šã®æ£®ã®ã•ã•ã‚„ãï¼šå®šç¾©ã¨ç—…æ…‹ã®ç†è§£",
                character: "èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª",
                story: "ç ”ä¿®åŒ»ã®ãŸãã¡ã‚ƒã‚“ã€ç·‘è±Šã‹ãªã€Œå§‹ã¾ã‚Šã®æ£®ã€ã«è¶³ã‚’è¸ã¿å…¥ã‚ŒãŸã­ã€‚ã“ã“ãŒã€Œã¦ã‚“ã‹ã‚“é‡ç©ã®æ£®ã€ã®å…¥ã‚Šå£ã ã€‚ã¾ãšã¯ã€ã“ã®æ£®ã®åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ«ã€ã¤ã¾ã‚Šã€Œã¦ã‚“ã‹ã‚“é‡ç©çŠ¶æ…‹ã€ã®å®šç¾©ã¨ç—…æ…‹ã‚’å­¦ã‚“ã§ã„ã“ã†ã€‚",
                questions: [
                    {
                        text: "å›½éš›æŠ—ã¦ã‚“ã‹ã‚“é€£ç›Ÿï¼ˆILAEï¼‰ãŒæå”±ã—ãŸã¦ã‚“ã‹ã‚“é‡ç©çŠ¶æ…‹ã®æ–°ã—ã„å®šç¾©ã«ãŠã„ã¦ã€å¼·ç›´é–“ä»£ã‘ã„ã‚Œã‚“æ€§SEã§ã€Œã“ã®æ™‚é–“ã‚’è¶…ãˆã‚‹ã¨ç™ºä½œãŒè‡ªç„¶åœæ­¢ã—ã«ãã„æ™‚é–“ï¼ˆt1ï¼‰ã€ã¨ã—ã¦è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã¯ä½•åˆ†ã§ã™ã‹ï¼Ÿ",
                        choices: ["1åˆ†", "5åˆ†", "10åˆ†", "30åˆ†"],
                        answer: "5åˆ†",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ 5åˆ† ã ã‚ˆã€‚ãŸãã¡ã‚ƒã‚“ã€ã‚‚ã†ä¸€åº¦ã‚ˆãè¦‹ã¦ã¿ã‚ˆã†ã€‚",
                        supplementary: [
                            "**æ™‚é–“ã“ãè„³ (Time is brain):** ç—™æ”£é‡ç©çŠ¶æ…‹ã§ã¯ã€ç™ºä½œãŒé•·ãç¶šãã»ã©è„³ã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ãŒå¤§ãããªã‚‹ã‚“ã ã€‚t1ã¨t2ã¨ã„ã†æ™‚é–“æŒ‡æ¨™ã¯ã€è¿…é€Ÿãªå¯¾å¿œã®é‡è¦æ€§ã‚’ç¤ºã—ã¦ã„ã‚‹ã‚ˆã€‚",
                            "**t1ã¨t2:** t1ã¯æ²»ç™‚ã‚’é–‹å§‹ã™ã¹ãç›®å®‰ã®æ™‚é–“ã€t2ã¯ç¥çµŒå¾Œéºç—‡ã®ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚‹æ™‚é–“ã ã€‚å¼·ç›´é–“ä»£ã‘ã„ã‚Œã‚“æ€§SEã§ã¯t1=5åˆ†ã€t2=30åˆ†ã ã‚ˆã€‚ä»–ã®ç™ºä½œå‹ã§ã¯ã“ã‚Œã‚‰ã®æ™‚é–“ãŒç•°ãªã‚‹ã‹ã‚‰æ³¨æ„ã—ã¦ã­ï¼ˆä¾‹ï¼šç„¦ç‚¹æ€§æ„è­˜éšœå®³ã‚’ä¼´ã†éƒ¨åˆ†ç™ºä½œSEã§ã¯t1~10åˆ†ã€t2~60åˆ†ï¼‰ã€‚",
                            "**æ¯”å–©:** ç—™æ”£é‡ç©çŠ¶æ…‹ã¯ã€ã¾ã‚‹ã§ãƒ–ãƒ¬ãƒ¼ã‚­ãŒåŠ¹ã‹ãªããªã£ãŸæš´èµ°åˆ—è»Šã®ã‚ˆã†ãªã‚‚ã®ã ã€‚t1ã®æ™‚ç‚¹ã§æ—©æœŸã«ä»‹å…¥ï¼ˆéå¸¸ãƒ–ãƒ¬ãƒ¼ã‚­ã‚’ã‹ã‘ã‚‹ï¼‰ã—ãªã„ã¨ã€t2ã®æ™‚ç‚¹ã§ã¯è„±ç·šï¼ˆç¥çµŒå¾Œéºç—‡ï¼‰ã®ãƒªã‚¹ã‚¯ãŒéå¸¸ã«é«˜ããªã£ã¦ã—ã¾ã†ã‚“ã ã€‚"
                        ]
                    },
                    {
                        text: "å¤–è¦‹ä¸Šã¯æ˜ã‚‰ã‹ãªå…¨èº«æ€§ã®ã‘ã„ã‚Œã‚“ã‚’ä¼´ã‚ãªã„ãŒã€æ„è­˜éšœå®³ã‚„è»½åº¦ã®è‡ªå‹•ç—‡ãŒè¦‹ã‚‰ã‚Œã‚‹ã¦ã‚“ã‹ã‚“é‡ç©çŠ¶æ…‹ã¯ä½•ã¨å‘¼ã°ã‚Œã¾ã™ã‹ï¼Ÿ",
                        choices: ["ã‘ã„ã‚Œã‚“æ€§SE", "éã‘ã„ã‚Œã‚“æ€§SE", "å¾®å°ç™ºä½œSE", "ç„¦ç‚¹æ€§æ„è­˜éšœå®³ç™ºä½œé‡ç©"],
                        answer: "éã‘ã„ã‚Œã‚“æ€§SE",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ éã‘ã„ã‚Œã‚“æ€§SE ã ã‚ˆã€‚è¦‹é€ƒã—ã‚„ã™ã„ã‹ã‚‰æ°—ã‚’ã¤ã‘ã‚ˆã†ã­ã€‚",
                        supplementary: [
                            "**éã‘ã„ã‚Œã‚“æ€§SE:** ã‘ã„ã‚Œã‚“ãŒè¦‹ã‚‰ã‚Œãªã„ãŸã‚è¦‹é€ƒã•ã‚Œã‚„ã™ã„ãŒã€è„³æ³¢ä¸Šã¯ç™ºä½œãŒç¶šã„ã¦ãŠã‚Šã€è„³ã«æŒç¶šçš„ãªè² è·ãŒã‹ã‹ã£ã¦ã„ã‚‹ã‚“ã ã€‚éš ã‚ŒãŸæ•µã‚’è¦‹ã¤ã‘ã‚‹ã‚ˆã†ãªã‚‚ã®ã ã­ã€‚",
                            "**å¾®å°ç™ºä½œSE:** å…¨èº«ã‘ã„ã‚Œã‚“æ€§SEãŒé•·æ™‚é–“ç¶šã„ãŸå¾Œã«ã€ã‘ã„ã‚Œã‚“ãŒç›®ç«‹ãŸãªããªã‚‹çŠ¶æ…‹ã ã€‚ã“ã‚Œã‚‚éã‘ã„ã‚Œã‚“æ€§SEã®ä¸€ç¨®ã¨ã¿ãªã•ã‚Œã€æ²»ç™‚ç¶™ç¶šãŒå¿…è¦ã ã‚ˆã€‚"
                        ]
                    }
                ]
            },
            {
                chapter: "ç·Šæ€¥ã®å·ã®æ€¥æµï¼šåˆæœŸå¯¾å¿œã®è¿…é€Ÿã•",
                character: "èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª",
                story: "ãŸãã¡ã‚ƒã‚“ã€ã“ã“ã¯ã€Œç·Šæ€¥ã®å·ã®æ€¥æµã€ã ã€‚æµã‚Œã¯é€Ÿãã€ä¸€åˆ»ã‚’äº‰ã†çŠ¶æ³ãŒå¤šã„ã€‚ã“ã“ã§ã¯ã€æ‚£è€…ã•ã‚“ã®å‘½ã‚’å®ˆã‚‹ãŸã‚ã®è¿…é€ŸãªåˆæœŸå¯¾å¿œãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ãã€‚",
                questions: [
                     {
                        text: "å°å…ã®ç—™æ”£é‡ç©çŠ¶æ…‹ã«ãŠã‘ã‚‹åˆæœŸå¯¾å¿œã®åŸºæœ¬ã¨ãªã‚‹A~Gè©•ä¾¡ã§ã€æœ€ã‚‚å„ªå…ˆã•ã‚Œã‚‹ã€ŒAã€ã¯ä½•ã‚’æŒ‡ã—ã¾ã™ã‹ï¼Ÿ",
                        choices: ["æ„è­˜ãƒ¬ãƒ™ãƒ« (Awareness)", "æ°—é“ç¢ºä¿ (Airway)", "å‘¼å¸ (Breathing)", "å¾ªç’° (Circulation)"],
                        answer: "æ°—é“ç¢ºä¿ (Airway)",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ æ°—é“ç¢ºä¿ (Airway) ã ã‚ˆã€‚å‘¼å¸ã®é“ã‚’é–‹ãã“ã¨ãŒä¸€ç•ªå¤§äº‹ã ã€‚",
                        supplementary: [
                            "**A-Gè©•ä¾¡:** æ•‘å‘½æªç½®ã®åŸºæœ¬ä¸­ã®åŸºæœ¬ã ã€‚A(æ°—é“ç¢ºä¿) -> B(å‘¼å¸) -> C(å¾ªç’°) -> D(ç¥çµŒå­¦çš„è©•ä¾¡/éšœå®³) -> E(ä½“æ¸©/å…¨èº«è¦³å¯Ÿ) -> F(æƒ…å ±åé›†) -> G(æ²»ç™‚é–‹å§‹) ã®é †ã«é€²ã‚ã‚‹ã‚“ã ã€‚",
                            "**æ°—é“ç¢ºä¿ã®é‡è¦æ€§:** ç—™æ”£ä¸­ã¯èˆŒæ ¹æ²ˆä¸‹ã‚„èª¤åš¥ã®ãƒªã‚¹ã‚¯ãŒé«˜ãã€æ°—é“ç¢ºä¿ãŒæœ€å„ªå…ˆã ã€‚ã“ã‚Œã«ã‚ˆã‚Šå‘¼å¸ã¨é…¸ç´ åŒ–ã‚’ç¢ºä¿ã™ã‚‹ã‚“ã ã€‚ã¾ã‚‹ã§ã€è©°ã¾ã£ãŸæ°´é“ç®¡ã‚’ç›´ã™ã‚ˆã†ãªã‚‚ã®ã ã­ã€‚"
                        ]
                    },
                    {
                        text: "åˆæœŸå¯¾å¿œã®ã€ŒD: Disabilityã€ã«ãŠã„ã¦ã€ç‰¹ã«è¿…é€Ÿãªç¢ºèªã¨å¯¾å¿œãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å¯é€†çš„ãªåŸå› ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                        choices: ["é«˜ä½“æ¸©", "ä½è¡€åœ§", "ä½è¡€ç³–", "é›»è§£è³ªç•°å¸¸"],
                        answer: "ä½è¡€ç³–",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ ä½è¡€ç³– ã ã‚ˆã€‚ã™ãã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è£œçµ¦ã—ã¦ã‚ã’ã‚ˆã†ã€‚",
                        supplementary: [
                            "**Dextroseã‚’å¿˜ã‚Œã‚‹ãª:** Dã®è©•ä¾¡ã§ã¯ã€è¿…é€Ÿãªè¡€ç³–æ¸¬å®šãŒéå¸¸ã«é‡è¦ã ã€‚ä½è¡€ç³–ã¯ç—™æ”£ã®åŸå› ã¨ãªã‚Šã€ãƒ–ãƒ‰ã‚¦ç³–æŠ•ä¸ã§é€Ÿã‚„ã‹ã«æ”¹å–„ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚“ã ã€‚",
                            "**å°å…ã®ä½è¡€ç³–ãƒªã‚¹ã‚¯:** å°å…ã¯ä»£è¬äºˆå‚™èƒ½ãŒä½ã„ã‹ã‚‰ã€é•·æ™‚é–“ã®ç—™æ”£ã§ä½è¡€ç³–ã«é™¥ã‚Šã‚„ã™ã„ã‚“ã ã€‚ã¾ã‚‹ã§ã€é›»æ± åˆ‡ã‚Œã§å‹•ã‹ãªããªã‚‹ãŠã‚‚ã¡ã‚ƒã®ã‚ˆã†ãªã‚‚ã®ã ã­ã€‚"
                        ]
                    }
                ]
            },
            {
                chapter: "è–¬è‰æ´çªŸã®è¼ãï¼šè–¬ç‰©ç™‚æ³•ã®çŸ¥è­˜",
                character: "èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª",
                story: "ãŸãã¡ã‚ƒã‚“ã€ã“ã“ã¯ã€Œè–¬è‰æ´çªŸã®è¼ãã€ã ã€‚ã“ã“ã§ã¯ã€ã¦ã‚“ã‹ã‚“é‡ç©çŠ¶æ…‹ã«ç”¨ã„ã‚‰ã‚Œã‚‹æ§˜ã€…ãªé­”æ³•ã®è–¬è‰ã€ã¤ã¾ã‚Šè–¬å‰¤ã®ç§˜å¯†ã‚’å­¦ã¶ã“ã¨ãŒã§ãã‚‹ãã€‚",
                questions: [
                    {
                        text: "ç—™æ”£é‡ç©çŠ¶æ…‹ã®è–¬ç‰©ç™‚æ³•ã«ãŠã„ã¦ã€ç™ºä½œé–‹å§‹å¾Œ5åˆ†ä»¥å†…ã®æŠ•ä¸ãŒç†æƒ³ã¨ã•ã‚Œã‚‹ç¬¬ä¸€é¸æŠè–¬ã®è–¬å‰¤ã‚¯ãƒ©ã‚¹ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                        choices: ["ãƒãƒ«ãƒ“ãƒ„ãƒ¼ãƒ«é…¸ç³»", "ãƒ•ã‚§ãƒ‹ãƒˆã‚¤ãƒ³ç³»", "ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³ç³»", "ãƒ¬ãƒ™ãƒãƒ©ã‚»ã‚¿ãƒ "],
                        answer: "ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³ç³»",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³ç³» ã ã‚ˆã€‚æœ€åˆã®é­”æ³•ã®å‘ªæ–‡ã ã€‚",
                        supplementary: [
                            "**ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³ç³»:** GABA_Aå—å®¹ä½“ã«ä½œç”¨ã—ã€è„³ã®éå‰°ãªèˆˆå¥®ã‚’è¿…é€Ÿã«æŠ‘ãˆã‚‹ã‚“ã ã€‚ã‚¸ã‚¢ã‚¼ãƒ‘ãƒ ã€ãƒŸãƒ€ã‚¾ãƒ©ãƒ ã€ãƒ­ãƒ©ã‚¼ãƒ‘ãƒ ãªã©ãŒã‚ã‚‹ã‚ˆã€‚",
                            "**æ—©æœŸæŠ•ä¸ã®é‡è¦æ€§:** ç™ºä½œé–‹å§‹ã‹ã‚‰ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³æŠ•ä¸ã¾ã§ã®æ™‚é–“é…å»¶ãŒã€äºˆå¾Œæ‚ªåŒ–ã‚„é›£æ²»åŒ–ã®ãƒªã‚¹ã‚¯ã‚’é«˜ã‚ã‚‹ã¨å ±å‘Šã•ã‚Œã¦ã„ã‚‹ã‚“ã ã€‚é­”æ³•ã¯æ—©ãå”±ãˆã‚‹ã»ã©åŠ¹æœãŒã‚ã‚‹ã‚“ã ã­ã€‚"
                        ]
                    },
                    {
                        text: "é•·æ™‚é–“ã®ç™ºä½œæŒç¶šã«ã‚ˆã‚Šã€ç¥çµŒç´°èƒè†œä¸Šã®GABA_Aå—å®¹ä½“ãŒæ¸›å°‘ã—ã€ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³ç³»è–¬ã®åŠ¹æœãŒä½ä¸‹ã™ã‚‹ç¾è±¡ã¯ä½•ã¨å‘¼ã°ã‚Œã¾ã™ã‹ï¼Ÿ",
                        choices: ["ã‚¿ã‚­ãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼ï¼ˆè€æ€§ï¼‰", "æ„Ÿå—æ€§äº¢é€²", "å—å®¹ä½“ã‚¢ãƒƒãƒ—ãƒ¬ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³", "ä»£è¬ä¿ƒé€²"],
                        answer: "ã‚¿ã‚­ãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼ï¼ˆè€æ€§ï¼‰",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ ã‚¿ã‚­ãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼ï¼ˆè€æ€§ï¼‰ ã ã‚ˆã€‚åŒã˜é­”æ³•ã°ã‹ã‚Šã ã¨åŠ¹ãç›®ãŒæ‚ªããªã‚‹ã‚“ã ã€‚",
                        supplementary: [
                            "**ã‚¿ã‚­ãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼:** è–¬å‰¤ã‚’ç¹°ã‚Šè¿”ã—æŠ•ä¸ã—ãŸã‚Šã€é•·æ™‚é–“ä½œç”¨ã•ã›ãŸã‚Šã™ã‚‹ã“ã¨ã§åŠ¹æœãŒæ¸›å¼±ã™ã‚‹ç¾è±¡ã ã€‚ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³ç³»è–¬ã§èµ·ã“ã‚Šã‚„ã™ãã€é›£æ²»æ€§SEã®åŸå› ã®ä¸€ã¤ãªã‚“ã ã€‚",
                            "**å—å®¹ä½“å¤‰åŒ–:** é•·æ™‚é–“ã®ç™ºä½œã«ã‚ˆã‚Šã€æŠ‘åˆ¶æ€§ã®GABA_Aå—å®¹ä½“ãŒç´°èƒå†…ã«å–ã‚Šè¾¼ã¾ã‚Œï¼ˆå†…åœ¨åŒ–ï¼‰ã€èˆˆå¥®æ€§ã®NMDAå—å®¹ä½“ãŒç´°èƒè†œä¸Šã«å¢—ãˆã‚‹ã“ã¨ãŒå ±å‘Šã•ã‚Œã¦ã„ã‚‹ã‚“ã ã€‚ã“ã‚ŒãŒè–¬å‰¤è€æ€§ã«é–¢ä¸ã™ã‚‹ã‚“ã ã‚ˆã€‚ã¾ã‚‹ã§ã€éµç©´ï¼ˆå—å®¹ä½“ï¼‰ãŒéš ã‚Œã¦ã—ã¾ã£ãŸã‚Šã€é•ã†éµç©´ãŒå¢—ãˆã¦ã—ã¾ã£ãŸã‚Šã™ã‚‹ã‚ˆã†ãªã‚‚ã®ã ã­ã€‚"
                        ]
                    },
                    {
                        text: "ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³æŠµæŠ—æ€§ã®ç¢ºç«‹ã—ãŸSEï¼ˆestablished SEï¼‰ã«å¯¾ã™ã‚‹ç¬¬äºŒé¸æŠè–¬ã¨ã—ã¦ã€ã‚·ãƒŠãƒ—ã‚¹å°èƒã‚¿ãƒ³ãƒ‘ã‚¯SV2Aã«çµåˆã—ã€é®é™ã‚„è¡€åœ§ä½ä¸‹ãªã©ã®å…¨èº«å‰¯ä½œç”¨ãŒå°‘ãªã„ã¨ã•ã‚Œã‚‹è–¬å‰¤ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                        choices: ["ãƒ•ã‚§ãƒãƒãƒ«ãƒ“ã‚¿ãƒ¼ãƒ«", "ãƒ›ã‚¹ãƒ•ã‚§ãƒ‹ãƒˆã‚¤ãƒ³", "ãƒãƒ«ãƒ—ãƒ­é…¸", "ãƒ¬ãƒ™ãƒãƒ©ã‚»ã‚¿ãƒ "],
                        answer: "ãƒ¬ãƒ™ãƒãƒ©ã‚»ã‚¿ãƒ ",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ ãƒ¬ãƒ™ãƒãƒ©ã‚»ã‚¿ãƒ  ã ã‚ˆã€‚æ–°ã—ã„é­”æ³•ã®è–¬è‰ã ã€‚",
                        supplementary: [
                            "**ãƒ¬ãƒ™ãƒãƒ©ã‚»ã‚¿ãƒ  (LEV):** æ–°ã—ã„æŠ—ã¦ã‚“ã‹ã‚“è–¬ã§ã€SV2Aã«çµåˆã—ã¦ç¥çµŒä¼é”ç‰©è³ªæ”¾å‡ºã‚’èª¿ç¯€ã™ã‚‹ã‚“ã ã€‚è–¬ç‰©ç›¸äº’ä½œç”¨ãŒå°‘ãªãã€å®‰å…¨æ€§ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‰¯ã„ã¨ã•ã‚Œã¦ã„ã‚‹ã‚ˆã€‚",
                            "**ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹:** è¤‡æ•°ã®è‡¨åºŠè©¦é¨“ï¼ˆEcLiPSEè©¦é¨“ã€ESETTè©¦é¨“ãªã©ï¼‰ã§ã€ãƒ™ãƒ³ã‚¾ã‚¸ã‚¢ã‚¼ãƒ”ãƒ³æŠµæŠ—æ€§ã®å°å…SEã«å¯¾ã—ã€å¾“æ¥ã®è–¬å‰¤ã¨åŒç­‰ã®åŠ¹æœã§å‰¯ä½œç”¨ãŒå°‘ãªã„ã“ã¨ãŒç¤ºã•ã‚Œã¦ã„ã‚‹ã‚“ã ã€‚"
                        ]
                    }
                ]
            },
            {
                chapter: "çœŸå®Ÿã®æ¹–ã®æ·±æ·µï¼šæ¤œæŸ»ã¨è¨ºæ–­",
                character: "èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª",
                story: "ãŸãã¡ã‚ƒã‚“ã€ã“ã“ã¯ã€ŒçœŸå®Ÿã®æ¹–ã®æ·±æ·µã€ã ã€‚ã“ã®æ¹–ã¯ã€éš ã•ã‚ŒãŸç—…æ°—ã®åŸå› ã‚’æ˜ ã—å‡ºã™ã€‚æ§˜ã€…ãªæ¤œæŸ»ã‚’é§†ä½¿ã—ã¦ã€çœŸå®Ÿã‚’è¦‹æŠœãåŠ›ã‚’é¤Šã†ã‚“ã ã€‚",
                questions: [
                    {
                        text: "ç—™æ”£é‡ç©çŠ¶æ…‹ã®æ‚£è€…ã«ãŠã„ã¦ã€é ­è“‹å†…å‡ºè¡€ã‚„å¤§ããªè…«ç˜ã€è„³æµ®è…«ãªã©ã‚’è¿…é€Ÿã«æ¤œå‡ºã™ã‚‹ãŸã‚ã«åˆç™‚æ®µéšã§æœ‰ç”¨ã¨ã•ã‚Œã‚‹ç”»åƒæ¤œæŸ»ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                        choices: ["é ­éƒ¨MRI", "è„³æ³¢æ¤œæŸ» (EEG)", "é ­éƒ¨CT", "è„³è¡€ç®¡é€ å½±"],
                        answer: "é ­éƒ¨CT",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ é ­éƒ¨CT ã ã‚ˆã€‚ç´ æ—©ãå…¨ä½“åƒã‚’æŠŠæ¡ã™ã‚‹ã‚“ã ã€‚",
                        supplementary: [
                            "**é ­éƒ¨CT:** æ’®åƒãŒè¿…é€Ÿã§ã€ç·Šæ€¥æ€§ã®é«˜ã„æ§‹é€ çš„ç—…å¤‰ï¼ˆå‡ºè¡€ã€æ¢—å¡ã€å¤§ããªè…«ç˜ãªã©ï¼‰ã‚’æ¤œå‡ºã™ã‚‹ã®ã«é©ã—ã¦ã„ã‚‹ã‚“ã ã€‚åˆç™‚æ®µéšã§ã¾ãšè€ƒæ…®ã•ã‚Œã‚‹ã‚ˆã€‚ã¾ã‚‹ã§ã€æ£®ã®å…¨ä½“åƒã‚’ç´ æ—©ãæŠŠæ¡ã™ã‚‹ãŸã‚ã®åœ°å›³ã®ã‚ˆã†ãªã‚‚ã®ã ã­ã€‚",
                            "**é ­éƒ¨MRI:** CTã‚ˆã‚Šã‚‚è©³ç´°ãªç”»åƒãŒå¾—ã‚‰ã‚Œã€é«„è†œç‚ã€è„³ç‚ã€å°ã•ãªç—…å¤‰ãªã©ã®æ¤œå‡ºã«å„ªã‚Œã¦ã„ã‚‹ã‚“ã ã€‚å…¨èº«çŠ¶æ…‹ãŒå®‰å®šã—ãŸå¾Œã«æ–½è¡Œã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã‚ˆã€‚ã“ã¡ã‚‰ã¯ã€æ£®ã®å¥¥æ·±ãã‚’è©³ç´°ã«æ¢ç´¢ã™ã‚‹ãŸã‚ã®ç²¾å¯†ãªç¾…é‡ç›¤ã®ã‚ˆã†ãªã‚‚ã®ã ã­ã€‚"
                        ]
                    },
                    {
                        text: "ç™ºç†±ã¨ç—™æ”£é‡ç©ã‚’ä¼´ã†ç—‡ä¾‹ã§ã€ç´°èŒæ€§é«„è†œç‚ã‚„è„³ç‚ã‚’å¼·ãç–‘ã†å ´åˆã€è¨ºæ–­ç¢ºå®šã®ãŸã‚ã«æ—©æœŸã«è¡Œã†ã¹ãæ¤œæŸ»ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                        choices: ["è¡€æ¶²åŸ¹é¤Š", "é«„æ¶²æ¤œæŸ»ï¼ˆè…°æ¤ç©¿åˆºï¼‰", "å°¿æ¤œæŸ»", "èƒ¸éƒ¨Xç·šæ¤œæŸ»"],
                        answer: "é«„æ¶²æ¤œæŸ»ï¼ˆè…°æ¤ç©¿åˆºï¼‰",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ é«„æ¶²æ¤œæŸ»ï¼ˆè…°æ¤ç©¿åˆºï¼‰ ã ã‚ˆã€‚æ¹–ã®æ°´ã‚’èª¿ã¹ã¦åŸå› ã‚’æ¢ã‚‹ã‚“ã ã€‚",
                        supplementary: [
                            "**é«„æ¶²æ¤œæŸ»:** ä¸­æ¢ç¥çµŒæ„ŸæŸ“ç—‡ï¼ˆé«„è†œç‚ã€è„³ç‚ï¼‰ã®è¨ºæ–­ã«å¿…é ˆã ã€‚é«„æ¶²ä¸­ã®ç´°èƒæ•°ã€è›‹ç™½ã€ç³–ã€ç—…åŸä½“ãªã©ã‚’èª¿ã¹ã‚‹ã‚“ã ã€‚",
                            "**é©å¿œ:** ç™ºç†±ã€é«„è†œåˆºæ¿€ç—‡çŠ¶ï¼ˆé …éƒ¨ç¡¬ç›´ãªã©ï¼‰ã€æ„è­˜éšœå®³ãªã©ãŒã¿ã‚‰ã‚Œã‚‹å ´åˆã«å¼·ãæ¨å¥¨ã•ã‚Œã‚‹ã‚ˆã€‚ãŸã ã—ã€é ­è“‹å†…åœ§äº¢é€²ãŒç–‘ã‚ã‚Œã‚‹å ´åˆã¯ã€CTã§ç¢ºèªã—ã¦ã‹ã‚‰è¡Œã†ã‚“ã ã€‚"
                        ]
                    }
                ]
            },
            {
                chapter: "å¸Œæœ›ã®å±±ã®é ‚ï¼šé›†ä¸­ç®¡ç†ã¨äºˆå¾Œ",
                character: "èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ª",
                story: "ãŸãã¡ã‚ƒã‚“ã€ã¤ã„ã«ã€Œå¸Œæœ›ã®å±±ã®é ‚ã€ã«åˆ°é”ã—ãŸã­ï¼ã“ã“ã‹ã‚‰ã¯ã€é•·æœŸçš„ãªè¦–ç‚¹ã§ã®ã‚±ã‚¢ã¨ã€æœªæ¥ã‚’è¦‹æ®ãˆãŸäºˆå¾Œç®¡ç†ã®é‡è¦æ€§ã‚’å­¦ã¶ã“ã¨ãŒã§ãã‚‹ãã€‚",
                questions: [
                     {
                        text: "ç—™æ”£é‡ç©çŠ¶æ…‹ã‚’çµŒé¨“ã—ãŸå°å…ãŒå°†æ¥çš„ã«æ…¢æ€§çš„ãªã¦ã‚“ã‹ã‚“ã‚’ç™ºç—‡ã™ã‚‹ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€30åˆ†ä»¥ä¸Šã®ç†±æ€§ã‘ã„ã‚Œã‚“ï¼ˆç†±æ€§ã‘ã„ã‚Œã‚“é‡ç©ï¼‰ã¯ã€å°†æ¥çš„ã«ã©ã®éƒ¨ä½ã®ã¦ã‚“ã‹ã‚“ã¨é–¢é€£ã™ã‚‹ã“ã¨ãŒæŒ‡æ‘˜ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                        choices: ["å‰é ­è‘‰ã¦ã‚“ã‹ã‚“", "å¾Œé ­è‘‰ã¦ã‚“ã‹ã‚“", "å´é ­è‘‰ã¦ã‚“ã‹ã‚“", "é ­é ‚è‘‰ã¦ã‚“ã‹ã‚“"],
                        answer: "å´é ­è‘‰ã¦ã‚“ã‹ã‚“",
                        feedbackTitle: "æ®‹å¿µ...",
                        feedbackText: "æ®‹å¿µï¼æ­£è§£ã¯ å´é ­è‘‰ã¦ã‚“ã‹ã‚“ ã ã‚ˆã€‚å°†æ¥ã®é“ç­‹ã‚’è¦‹æ¥µã‚ã‚‹ã“ã¨ã‚‚å¤§åˆ‡ã ã€‚",
                        supplementary: [
                            "**ã¦ã‚“ã‹ã‚“ç§»è¡Œãƒªã‚¹ã‚¯:** ç—™æ”£é‡ç©çŠ¶æ…‹ã¯ã€è„³ã«ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ä¸ãˆã€ã¦ã‚“ã‹ã‚“ã‚’ç™ºç—‡ã—ã‚„ã™ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚“ã ã€‚",
                            "**ç†±æ€§ã‘ã„ã‚Œã‚“é‡ç©ã¨å´é ­è‘‰ã¦ã‚“ã‹ã‚“:** é•·æ™‚é–“ã®ç†±æ€§ã‘ã„ã‚Œã‚“ã¯ã€ç‰¹ã«å´é ­è‘‰ï¼ˆæµ·é¦¬ãªã©ï¼‰ã«å½±éŸ¿ã‚’ä¸ãˆã‚„ã™ãã€å¾Œã«å´é ­è‘‰ã¦ã‚“ã‹ã‚“ã‚’ç™ºç—‡ã™ã‚‹ãƒªã‚¹ã‚¯ã‚’é«˜ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¦ã„ã‚‹ã‚“ã ã€‚ã¾ã‚‹ã§ã€éå»ã®åµãŒæœªæ¥ã®æ™¯è‰²ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã‚ˆã†ãªã‚‚ã®ã ã­ã€‚"
                        ]
                    }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let xp = 0;
        let level = 1;
        let incorrectAnswers = [];
        let shuffledQuestions = [];
        let questionsOrder = [];

        const startGameBtn = document.getElementById('start-game-btn');
        const gameIntroDiv = document.getElementById('game-intro');
        const gameAreaDiv = document.getElementById('game-area');
        const storyIntroDiv = document.getElementById('story-intro');
        const questionDisplayDiv = document.getElementById('question-display');
        const questionText = document.getElementById('question-text');
        const answerChoicesDiv = document.getElementById('answer-choices');
        const feedbackDisplayDiv = document.getElementById('feedback-display');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');
        const supplementaryList = document.getElementById('supplementary-list');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const characterDialogueDiv = document.getElementById('character-dialogue');
        const characterImage = document.getElementById('character-image');
        const characterText = document.getElementById('character-text');
        const progressBar = document.getElementById('progress-bar');
        const xpLevelDisplay = document.getElementById('xp-level');
        const gameEndDiv = document.getElementById('game-end');
        const finalScorePara = document.getElementById('final-score');
        const finalXpLevelPara = document.getElementById('final-xp-level');
        const badgesEarnedDiv = document.getElementById('badges-earned');
        const badgeList = document.getElementById('badge-list');
        const incorrectAnswersSummaryDiv = document.getElementById('incorrect-answers-summary');
        const weaknessFeedbackPara = document.getElementById('weakness-feedback');
        const incorrectList = document.getElementById('incorrect-list');
        const reviewModeBtn = document.getElementById('review-mode-btn');
        const restartGameBtn = document.getElementById('restart-game-btn');
        const shuffleQuestionsCheckbox = document.getElementById('shuffle-questions');
        const shuffleChoicesCheckbox = document.getElementById('shuffle-choices');

        // XP thresholds for leveling up (example)
        const levelThresholds = [0, 50, 150, 300, 500, 800, 1200, 1700, 2300, 3000, 4000];
        // ç§°å·ã‚’ç ”ä¿®åŒ»ã®æˆé•·æ®µéšã«åˆã‚ã›ã‚‹
        const titles = ["è¦‹ç¿’ã„ç ”ä¿®åŒ»", "çŸ¥è­˜ã®æ¢æ±‚è€…", "ã¦ã‚“ã‹ã‚“é‡ç©ã®æ£®ã®æ­©ãæ–¹", "çœŸå®Ÿã‚’è¦‹æŠœãè€…", "ã‚»ãƒ•ã‚¡ãƒ«ã‚¹ã®è³¢è€…"];

        // Badges (example)
        const badges = {
            perfectGame: { name: "ã¦ã‚“ã‹ã‚“é‡ç©ãƒã‚¹ã‚¿ãƒ¼", description: "å…¨å•æ­£è§£ã—ã¾ã—ãŸï¼" },
            quickLearner: { name: "è¿…é€Ÿå¯¾å¿œã®è¨¼", description: "ä¸æ­£è§£ãŒ3å•æœªæº€ã§ã—ãŸï¼" }
        };
        let earnedBadges = [];

        // Function to shuffle an array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
            return array;
        }

        // Function to get the current chapter's data
        function getCurrentChapterData() {
            let chapterIndex = Math.floor(currentQuestionIndex / 2); // Assuming 2 questions per chapter for now
            if (chapterIndex >= gameData.length) chapterIndex = gameData.length - 1; // Prevent out of bounds
             // Use the pre-shuffled order if available
            return gameData[questionsOrder[chapterIndex]];
        }

        // Function to get the current question
        function getCurrentQuestion() {
            const currentChapterData = getCurrentChapterData();
            const chapterQuestions = currentChapterData.questions;
            // Use the pre-shuffled order within the chapter if available
            const chapterDataIndexInGameData = gameData.indexOf(currentChapterData);
            const shuffledChapterQuestions = shuffledQuestions[questionsOrder.indexOf(chapterDataIndexInGameData)];
            const questionInChapterIndex = currentQuestionIndex % 2; // Assuming 2 questions per chapter
            return chapterQuestions[shuffledChapterQuestions[questionInChapterIndex]];
        }


        // Function to update XP and Level
        function updateXpAndLevel(gainedXp) {
            xp += gainedXp;
            let newLevel = level;
            for (let i = 0; i < levelThresholds.length - 1; i++) {
                if (xp >= levelThresholds[i] && xp < levelThresholds[i + 1]) {
                    newLevel = i + 1;
                    break;
                } else if (xp >= levelThresholds[levelThresholds.length - 1]) {
                    newLevel = levelThresholds.length;
                    break;
                }
            }
            level = newLevel;
            const currentTitle = titles[Math.min(level - 1, titles.length - 1)];
            xpLevelDisplay.textContent = `XP: ${xp} | ãƒ¬ãƒ™ãƒ«: ${level} | ç§°å·: ${currentTitle}`;
        }

        // Function to update the progress bar
        function updateProgressBar() {
            const totalQuestions = gameData.reduce((sum, chapter) => sum + chapter.questions.length, 0);
            const progress = (currentQuestionIndex / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${Math.round(progress)}%`;
        }

        // Function to display the current question
        function displayQuestion() {
            const question = getCurrentQuestion();
            if (!question) {
                endGame();
                return;
            }

            const currentChapterData = getCurrentChapterData();
            storyIntroDiv.innerHTML = `<p>${currentChapterData.story}</p>`;

            // Display character image and dialogue
            characterImage.src = characterImages[currentChapterData.character];
            characterImage.classList.remove('hidden');
            characterText.textContent = `${currentChapterData.character}ï¼š${currentChapterData.story.split('ã€‚')[currentChapterData.story.split('ã€‚').length - 2].trim()}ã€‚`; // ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®æœ€å¾Œã®æ–‡ã‚’ã‚»ãƒªãƒ•ã¨ã—ã¦è¡¨ç¤º

            questionText.textContent = question.text;
            answerChoicesDiv.innerHTML = ''; // Clear previous choices

            let choicesToDisplay = [...question.choices];
            if (shuffleChoicesCheckbox.checked) {
                 choicesToDisplay = shuffleArray(choicesToDisplay);
            }


            choicesToDisplay.forEach(choice => {
                const button = document.createElement('button');
                button.textContent = choice;
                button.classList.add('bg-blue-200', 'hover:bg-blue-300', 'text-blue-800', 'font-semibold', 'py-2', 'px-4', 'rounded-md', 'text-left');
                button.onclick = () => checkAnswer(choice);
                answerChoicesDiv.appendChild(button);
            });

            feedbackDisplayDiv.classList.add('hidden');
            questionDisplayDiv.classList.remove('hidden');
            nextQuestionBtn.classList.add('hidden');
        }

        // Function to check the answer
        function checkAnswer(selectedChoice) {
            const question = getCurrentQuestion();
            const isCorrect = selectedChoice === question.answer;

            answerChoicesDiv.querySelectorAll('button').forEach(button => {
                button.disabled = true; // Disable buttons after selection
                if (button.textContent === question.answer) {
                    button.classList.remove('bg-blue-200', 'hover:bg-blue-300', 'bg-red-500'); // Remove other colors
                    button.classList.add('bg-green-500', 'text-white'); // Correct answer highlight
                } else if (button.textContent === selectedChoice) {
                     button.classList.remove('bg-blue-200', 'hover:bg-blue-300', 'bg-green-500'); // Remove other colors
                    button.classList.add('bg-red-500', 'text-white'); // Incorrect answer highlight
                } else {
                    button.classList.remove('bg-blue-200', 'hover:bg-blue-300', 'bg-green-500', 'bg-red-500'); // Remove other colors
                    button.classList.add('bg-gray-300', 'text-gray-700'); // Dim other options
                }
            });

            questionDisplayDiv.classList.add('hidden');
            feedbackDisplayDiv.classList.remove('hidden');
            nextQuestionBtn.classList.remove('hidden');

            // Hide character image and clear dialogue during feedback
            characterImage.classList.add('hidden');
            characterText.textContent = '';

            if (isCorrect) {
                score++;
                updateXpAndLevel(10); // Award 10 XP for correct answer
                feedbackTitle.textContent = "æ­£è§£ï¼ç´ æ™´ã‚‰ã—ã„ï¼";
                feedbackTitle.classList.remove('text-red-700');
                feedbackTitle.classList.add('text-green-700');
                feedbackText.textContent = `èµ¤ã„ã‚µãƒ³ã‚·ãƒ§ã‚¦ã‚¦ã‚ªï¼šã‚ˆãã‚„ã£ãŸã­ã€ãŸãã¡ã‚ƒã‚“ï¼`;
                supplementaryList.innerHTML = ''; // Clear previous supplementary points
            } else {
                incorrectAnswers.push({
                    question: question.text,
                    yourAnswer: selectedChoice,
                    correctAnswer: question.answer,
                    feedback: question.feedbackText,
                    supplementary: question.supplementary
                });
                 updateXpAndLevel(5); // Award 5 XP for incorrect answer (partial learning)
                feedbackTitle.textContent = question.feedbackTitle;
                 feedbackTitle.classList.remove('text-green-700');
                feedbackTitle.classList.add('text-red-700');
                feedbackText.textContent = question.feedbackText;
                supplementaryList.innerHTML = ''; // Clear previous supplementary points
                if (question.supplementary) { // Check if supplementary exists
                     question.supplementary.forEach(point => {
                        const li = document.createElement('li');
                        li.innerHTML = point; // Use innerHTML to render bold/italics from markdown
                        supplementaryList.appendChild(li);
                    });
                }
            }
        }

        // Function to move to the next question
        function nextQuestion() {
            currentQuestionIndex++;
            updateProgressBar();
            const totalQuestions = gameData.reduce((sum, chapter) => sum + chapter.questions.length, 0);
            if (currentQuestionIndex < totalQuestions) {
                displayQuestion();
            } else {
                endGame();
            }
        }

         // Function to end the game
        function endGame() {
            gameAreaDiv.classList.add('hidden');
            gameEndDiv.classList.remove('hidden');

            const totalQuestions = gameData.reduce((sum, chapter) => sum + chapter.questions.length, 0);
            finalScorePara.textContent = `æœ€çµ‚ã‚¹ã‚³ã‚¢: ${score} / ${totalQuestions}`;
            finalXpLevelPara.textContent = `æœ€çµ‚XP: ${xp} | æœ€çµ‚ãƒ¬ãƒ™ãƒ«: ${level} | ç§°å·: ${titles[Math.min(level - 1, titles.length - 1)]}`;

            // Award badges
            earnedBadges = [];
            if (score === totalQuestions) {
                earnedBadges.push(badges.perfectGame);
            }
            if (incorrectAnswers.length < 3) {
                 earnedBadges.push(badges.quickLearner);
            }

            badgeList.innerHTML = '';
            if (earnedBadges.length > 0) {
                earnedBadges.forEach(badge => {
                    const li = document.createElement('li');
                    li.textContent = `ğŸ† ${badge.name}: ${badge.description}`;
                    badgeList.appendChild(li);
                });
            } else {
                badgeList.innerHTML = '<li>ãƒãƒƒã‚¸ã®ç²å¾—ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</li>';
            }


            // Display incorrect answers summary
            incorrectList.innerHTML = '';
            if (incorrectAnswers.length > 0) {
                 weaknessFeedbackPara.textContent = `ãŸãã¡ã‚ƒã‚“ã€å›ã¯${incorrectAnswers.length}å•ã‚’é–“é•ãˆã¦ã—ã¾ã£ãŸã­ã€‚ä»¥ä¸‹ã®å•é¡Œã‚’è¦‹ç›´ã—ã¦ã€ã‚‚ã£ã¨å¼·ããªã‚ã†ï¼`;
                incorrectAnswersSummaryDiv.classList.remove('hidden');
                incorrectAnswers.forEach(item => {
                    const li = document.createElement('li');
                    li.innerHTML = `**å•é¡Œ:** ${item.question}<br>ã‚ãªãŸã®è§£ç­”: ${item.yourAnswer}<br>æ­£è§£: ${item.correctAnswer}<br>**è§£èª¬:** ${item.feedback}`;
                     if (item.supplementary && item.supplementary.length > 0) {
                        li.innerHTML += '<br><em>è£œè¶³å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:</em>';
                        item.supplementary.forEach(sup => {
                            li.innerHTML += `<br>- ${sup}`;
                        });
                     }
                    incorrectList.appendChild(li);
                });

            } else {
                 weaknessFeedbackPara.textContent = "ãŸãã¡ã‚ƒã‚“ã€å…¨å•æ­£è§£ã ï¼ç´ æ™´ã‚‰ã—ã„ï¼å›ã¯ã€Œã¦ã‚“ã‹ã‚“é‡ç©ã®æ£®ã€ã®çœŸã®è³¢è€…ã ã­ï¼";
                 incorrectAnswersSummaryDiv.classList.remove('hidden'); // Still show the perfect score message
            }
        }

        // Function to start a new game
        function startNewGame(isReviewMode = false) {
            currentQuestionIndex = 0;
            score = 0;
            xp = 0;
            level = 1;
            incorrectAnswers = [];
            earnedBadges = [];

            gameIntroDiv.classList.add('hidden');
            gameEndDiv.classList.add('hidden');
            gameAreaDiv.classList.remove('hidden');
             feedbackDisplayDiv.classList.add('hidden'); // Hide feedback at the start

            updateXpAndLevel(0); // Initialize XP and Level display
            updateProgressBar(); // Initialize progress bar

            // Prepare questions for the new game
            if (shuffleQuestionsCheckbox.checked) {
                // Shuffle the order of chapters first
                questionsOrder = shuffleArray(Array.from({ length: gameData.length }, (_, i) => i));
                // Then shuffle questions within each chapter and store the order
                shuffledQuestions = questionsOrder.map(chapterIndex => {
                    const chapterQuestions = gameData[chapterIndex].questions;
                    return shuffleArray(Array.from({ length: chapterQuestions.length }, (_, i) => i));
                });
            } else {
                 // Use original order
                 questionsOrder = Array.from({ length: gameData.length }, (_, i) => i);
                 shuffledQuestions = gameData.map(chapter => Array.from({ length: chapter.questions.length }, (_, i) => i));
            }

            if (isReviewMode) {
                 // Filter gameData to only include questions that were previously answered incorrectly
                 // Note: This requires storing the original question objects or indices
                 // For simplicity in this example, we'll just restart the full game for now.
                 // A more robust review mode would need a different data structure.
                 alert("å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã¯ç¾åœ¨é–‹ç™ºä¸­ã§ã™ã€‚ä»£ã‚ã‚Šã«é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§å†æŒ‘æˆ¦ã—ã¾ã™ã€‚");
                 startNewGame(false); // Fallback to normal restart
                 return;
            }

            displayQuestion(); // Display the first question
        }


        // Event Listeners
        startGameBtn.addEventListener('click', () => startNewGame());
        nextQuestionBtn.addEventListener('click', nextQuestion);
        restartGameBtn.addEventListener('click', () => startNewGame());
        reviewModeBtn.addEventListener('click', () => startNewGame(true)); // Pass true for review mode

        // Initial setup
        updateXpAndLevel(0); // Display initial XP and Level
    </script>
</body>
</html>
